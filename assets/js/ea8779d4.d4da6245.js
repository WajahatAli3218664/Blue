"use strict";(self.webpackChunkphysical_ai_humanoid_robotics_textbook=self.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[318],{1126(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var i=t(4848),a=t(8453);const o={},s="URDF & Python Agent Integration",r={id:"module1/urdf-integration",title:"URDF & Python Agent Integration",description:"Introduction",source:"@site/docs/module1/urdf-integration.md",sourceDirName:"module1",slug:"/module1/urdf-integration",permalink:"/docs/module1/urdf-integration",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"ROS 2 Nodes & Topics",permalink:"/docs/module1/nodes-topics"},next:{title:"Module 2: The Digital Twin (Gazebo & Unity)",permalink:"/docs/module2/"}},l={},c=[{value:"Introduction",id:"introduction",level:2},{value:"What is URDF?",id:"what-is-urdf",level:2},{value:"Basic URDF Structure",id:"basic-urdf-structure",level:2},{value:"Python Agent Integration",id:"python-agent-integration",level:2},{value:"Launch File Integration",id:"launch-file-integration",level:2},{value:"Advanced Agent Behaviors",id:"advanced-agent-behaviors",level:2},{value:"State Machine Implementation",id:"state-machine-implementation",level:3},{value:"Sensor Integration",id:"sensor-integration",level:2},{value:"Hardware Deployment Notes",id:"hardware-deployment-notes",level:2},{value:"Practical Exercise",id:"practical-exercise",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"urdf--python-agent-integration",children:"URDF & Python Agent Integration"}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.p,{children:"URDF (Unified Robot Description Format) is an XML format for representing a robot model. When combined with Python agents, it creates intelligent robotic systems that understand their physical structure."}),"\n",(0,i.jsx)(n.h2,{id:"what-is-urdf",children:"What is URDF?"}),"\n",(0,i.jsx)(n.p,{children:"URDF describes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Links"}),": Rigid bodies of the robot (chassis, arms, wheels)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Joints"}),": Connections between links (revolute, prismatic, fixed)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Sensors"}),": Cameras, lidars, IMUs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Visual/Collision"}),": 3D meshes and collision boundaries"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"basic-urdf-structure",children:"Basic URDF Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="my_robot">\n  \x3c!-- Base link --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <box size="0.6 0.4 0.2"/>\n      </geometry>\n      <material name="blue">\n        <color rgba="0 0 1 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <box size="0.6 0.4 0.2"/>\n      </geometry>\n    </collision>\n  </link>\n\n  \x3c!-- Wheel link --\x3e\n  <link name="wheel_link">\n    <visual>\n      <geometry>\n        <cylinder radius="0.1" length="0.05"/>\n      </geometry>\n      <material name="black">\n        <color rgba="0 0 0 1"/>\n      </material>\n    </visual>\n  </link>\n\n  \x3c!-- Joint connecting base to wheel --\x3e\n  <joint name="wheel_joint" type="continuous">\n    <parent link="base_link"/>\n    <child link="wheel_link"/>\n    <origin xyz="0.2 0 -0.1" rpy="0 1.57 0"/>\n    <axis xyz="0 0 1"/>\n  </joint>\n</robot>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"python-agent-integration",children:"Python Agent Integration"}),"\n",(0,i.jsx)(n.p,{children:"Create an intelligent agent that controls the URDF robot:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\nfrom sensor_msgs.msg import JointState\nimport math\nimport time\n\nclass RobotAgent(Node):\n    def __init__(self):\n        super().__init__(\'robot_agent\')\n        \n        # Publishers\n        self.cmd_vel_pub = self.create_publisher(Twist, \'/cmd_vel\', 10)\n        self.joint_pub = self.create_publisher(JointState, \'/joint_states\', 10)\n        \n        # Robot state\n        self.position = [0.0, 0.0, 0.0]  # x, y, theta\n        self.joint_positions = {\'wheel_joint\': 0.0}\n        \n        # Control timer\n        self.timer = self.create_timer(0.1, self.control_loop)\n        \n        # Mission parameters\n        self.target_position = [2.0, 2.0]\n        self.mission_state = "navigate_to_target"\n\n    def control_loop(self):\n        """Main control loop for the robot agent"""\n        if self.mission_state == "navigate_to_target":\n            self.navigate_to_target()\n        elif self.mission_state == "patrol":\n            self.patrol_behavior()\n        elif self.mission_state == "idle":\n            self.stop_robot()\n\n    def navigate_to_target(self):\n        """Navigate to target position using simple proportional control"""\n        # Calculate distance and angle to target\n        dx = self.target_position[0] - self.position[0]\n        dy = self.target_position[1] - self.position[1]\n        distance = math.sqrt(dx**2 + dy**2)\n        target_angle = math.atan2(dy, dx)\n        \n        # Create velocity command\n        cmd = Twist()\n        \n        if distance > 0.1:  # Not at target yet\n            # Proportional control\n            cmd.linear.x = min(0.5, distance * 0.5)\n            \n            # Angular control\n            angle_diff = target_angle - self.position[2]\n            cmd.angular.z = angle_diff * 0.8\n            \n        else:\n            # Reached target\n            self.mission_state = "patrol"\n            cmd.linear.x = 0.0\n            cmd.angular.z = 0.0\n        \n        self.cmd_vel_pub.publish(cmd)\n        self.update_joint_states()\n\n    def patrol_behavior(self):\n        """Simple patrol behavior"""\n        cmd = Twist()\n        cmd.linear.x = 0.2\n        cmd.angular.z = 0.1  # Slow turn\n        \n        self.cmd_vel_pub.publish(cmd)\n        self.update_joint_states()\n\n    def stop_robot(self):\n        """Stop all robot movement"""\n        cmd = Twist()\n        self.cmd_vel_pub.publish(cmd)\n\n    def update_joint_states(self):\n        """Update and publish joint states"""\n        joint_state = JointState()\n        joint_state.header.stamp = self.get_clock().now().to_msg()\n        joint_state.name = list(self.joint_positions.keys())\n        joint_state.position = list(self.joint_positions.values())\n        \n        # Simulate wheel rotation\n        self.joint_positions[\'wheel_joint\'] += 0.1\n        \n        self.joint_pub.publish(joint_state)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    robot_agent = RobotAgent()\n    rclpy.spin(robot_agent)\n    robot_agent.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"launch-file-integration",children:"Launch File Integration"}),"\n",(0,i.jsx)(n.p,{children:"Create a launch file to start everything together:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom launch.actions import ExecuteProcess\n\ndef generate_launch_description():\n    return LaunchDescription([\n        # Robot state publisher\n        Node(\n            package='robot_state_publisher',\n            executable='robot_state_publisher',\n            parameters=[{'robot_description': open('my_robot.urdf').read()}]\n        ),\n        \n        # Joint state publisher\n        Node(\n            package='joint_state_publisher',\n            executable='joint_state_publisher'\n        ),\n        \n        # Our robot agent\n        Node(\n            package='my_robot_package',\n            executable='robot_agent',\n            output='screen'\n        ),\n        \n        # RViz for visualization\n        ExecuteProcess(\n            cmd=['rviz2', '-d', 'robot_config.rviz'],\n            output='screen'\n        )\n    ])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"advanced-agent-behaviors",children:"Advanced Agent Behaviors"}),"\n",(0,i.jsx)(n.h3,{id:"state-machine-implementation",children:"State Machine Implementation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"class RobotStateMachine:\n    def __init__(self):\n        self.states = {\n            'IDLE': self.idle_state,\n            'EXPLORING': self.explore_state,\n            'CHARGING': self.charge_state,\n            'EMERGENCY': self.emergency_state\n        }\n        self.current_state = 'IDLE'\n        self.battery_level = 100.0\n\n    def update(self):\n        # Execute current state\n        next_state = self.states[self.current_state]()\n        \n        # Transition logic\n        if next_state:\n            self.current_state = next_state\n\n    def idle_state(self):\n        if self.battery_level > 50:\n            return 'EXPLORING'\n        elif self.battery_level < 20:\n            return 'CHARGING'\n        return None\n\n    def explore_state(self):\n        # Exploration logic\n        if self.battery_level < 30:\n            return 'CHARGING'\n        return None\n"})}),"\n",(0,i.jsx)(n.h2,{id:"sensor-integration",children:"Sensor Integration"}),"\n",(0,i.jsx)(n.p,{children:"Add sensors to your URDF and integrate with the agent:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Add camera sensor --\x3e\n<link name="camera_link">\n  <visual>\n    <geometry>\n      <box size="0.05 0.05 0.05"/>\n    </geometry>\n  </visual>\n</link>\n\n<joint name="camera_joint" type="fixed">\n  <parent link="base_link"/>\n  <child link="camera_link"/>\n  <origin xyz="0.3 0 0.1" rpy="0 0 0"/>\n</joint>\n\n\x3c!-- Gazebo camera plugin --\x3e\n<gazebo reference="camera_link">\n  <sensor type="camera" name="camera1">\n    <update_rate>30.0</update_rate>\n    <camera name="head">\n      <horizontal_fov>1.3962634</horizontal_fov>\n      <image>\n        <width>800</width>\n        <height>600</height>\n        <format>R8G8B8</format>\n      </image>\n      <clip>\n        <near>0.02</near>\n        <far>300</far>\n      </clip>\n    </camera>\n    <plugin name="camera_controller" filename="libgazebo_ros_camera.so">\n      <alwaysOn>true</alwaysOn>\n      <updateRate>0.0</updateRate>\n      <cameraName>robot/camera1</cameraName>\n      <imageTopicName>image_raw</imageTopicName>\n      <cameraInfoTopicName>camera_info</cameraInfoTopicName>\n      <frameName>camera_link</frameName>\n    </plugin>\n  </sensor>\n</gazebo>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"hardware-deployment-notes",children:"Hardware Deployment Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"RTX Workstations"}),": Handle complex URDF models with detailed meshes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Jetson Orin Nano"}),": Optimize URDF for lightweight deployment"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"RealSense Integration"}),": Replace simulated sensors with real camera data"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"practical-exercise",children:"Practical Exercise"}),"\n",(0,i.jsx)(n.p,{children:"Create a delivery robot:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Design URDF with mobile base and cargo compartment"}),"\n",(0,i.jsx)(n.li,{children:"Implement Python agent with waypoint navigation"}),"\n",(0,i.jsx)(n.li,{children:"Add obstacle avoidance behavior"}),"\n",(0,i.jsx)(n.li,{children:"Integrate battery monitoring system"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(n.p,{children:"In Module 2, we'll learn how to simulate these URDF robots in realistic physics environments using Gazebo and Unity."})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>s,x:()=>r});var i=t(6540);const a={},o=i.createContext(a);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);